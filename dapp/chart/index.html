<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>CHART</title>
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 400' width='400' height='400'%3E%3Crect width='400' height='400' fill='%23000'/%3E%3CclipPath id='frame'%3E%3Crect width='400' height='400'/%3E%3C/clipPath%3E%3Cg clip-path='url(%23frame)'%3E%3Cpath d='M-60-20L460-20L460 90L80 310L460 310L460 420L-60 420L-60 310L320 90L-60 90Z' fill='white'/%3E%3C/g%3E%3C/svg%3E" type="image/svg+xml">
<script>
(function(){var d=localStorage.getItem('dark');if(d==='1'||(d===null&&matchMedia('(prefers-color-scheme:dark)').matches))document.documentElement.classList.add('dark')})();
</script>
<style>
:root {
  --bg:#fff;--fg:#000;--fg-muted:#666;--fg-dim:#999;
  --border:#000;--border-muted:#ddd;
  --surface:#f9f9f9;
  --btn-bg:#000;--btn-fg:#fff;--btn-hover:#333;
  --link-fg:inherit;
}
.dark {
  --bg:#0a0a0a;--fg:#e8e8e0;--fg-muted:#777;--fg-dim:#555;
  --border:#333;--border-muted:#333;
  --surface:#111;
  --btn-bg:#e8e8e0;--btn-fg:#0a0a0a;--btn-hover:#ccc;
  --link-fg:#e8e8e0;
}
* { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
body {
  font-family: Helvetica, Arial, sans-serif;
  background: var(--bg);
  color: var(--fg);
  min-height: 100vh;
  padding: 60px 20px 20px;
  max-width: 960px;
  margin: 0 auto;
}
a { color: var(--link-fg); }
h1 {
  font-size: 14px;
  font-weight: 400;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  margin-bottom: 24px;
}
.pool-id {
  font-size: 11px;
  color: var(--fg-muted);
  margin-bottom: 16px;
  word-break: break-all;
  letter-spacing: 0.02em;
}
.chart-wrap {
  position: relative;
  width: 100%;
  padding-bottom: 56.25%; /* 16:9 */
  background: var(--surface);
  border: 1px solid var(--border-muted);
}
.chart-wrap iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border: none;
}
.chart-error {
  padding: 40px 20px;
  text-align: center;
  font-size: 13px;
  color: var(--fg-muted);
}
.dark-toggle {
  position: fixed;
  top: max(22px, env(safe-area-inset-top, 0px));
  left: max(20px, env(safe-area-inset-left, 0px));
  border: none; cursor: pointer; padding: 13px; margin: -13px;
  opacity: 0.5; transition: opacity 0.2s; z-index: 100;
  background: #000; border-radius: 50%; width: 40px; height: 40px; background-clip: content-box;
}
:root.dark .dark-toggle { background: #fff; }
.dark-toggle:hover { opacity: 1; }
@media (max-width:600px) {
  .dark-toggle { top:18px; left:16px; }
}
.site-footer {
  position: relative;
  text-align: center; padding: 48px 20px; font-size: 11px;
  opacity: 0.55; letter-spacing: 0.5px; font-weight: 300; margin-top: 40px;
}
.site-footer a { color: inherit; text-decoration: underline; margin: 0 2px; }
.site-footer a:hover { opacity: 0.7; }
.site-footer .tagline { opacity:1; color:#000; font-weight:500; }
.dark .site-footer .tagline { color:#fff; }
.zorg-bg{fill:#fff}.zorg-fg{fill:#000}
.dark .zorg-bg{fill:#000}.dark .zorg-fg{fill:#fff}
.home-btn {
  position: fixed;
  bottom: max(20px, env(safe-area-inset-bottom, 0px));
  right: max(20px, env(safe-area-inset-right, 0px));
  z-index: 100;
  opacity: 0.4;
  transition: opacity 0.2s;
  line-height: 0;
}
.home-btn:hover { opacity: 1; }
</style>
</head>
<body>

<a href="../" class="home-btn" title="Home"><svg width="28" height="28" viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg"><rect class="zorg-bg" width="400" height="400"/><clipPath id="zh"><rect width="400" height="400"/></clipPath><g clip-path="url(#zh)"><path class="zorg-fg" d="M-60-20L460-20L460 90L80 310L460 310L460 420L-60 420L-60 310L320 90L-60 90Z"/></g></svg></a>

<button class="dark-toggle" onclick="toggleDark()" title="Toggle dark mode"></button>

<h1>Pool Chart</h1>
<div class="pool-id" id="poolIdDisplay"></div>
<div id="chartContainer"></div>

<footer class="site-footer">
  <a href="../">Swap</a> &middot; <a href="../domains/">Domains</a> &middot; <a href="../dao/">DAO</a> &middot; <a href="../coin/">Coin</a> &middot; <a href="../predict/">Predict</a> &middot; <a href="../orderbook/">Orderbook</a> &middot; <a href="../lp/">LP</a> &middot; built by <a href="https://opensea.io/collection/zorgz" target="_blank" rel="noopener"><svg width="14" height="14" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" style="vertical-align:middle;margin:0 2px;image-rendering:pixelated"><rect width="16" height="16" fill="#0a0a0a"/><rect x="3" y="1" width="1" height="1" fill="#e8e8e0"/><rect x="5" y="2" width="1" height="1" fill="#e8e8e0"/><rect x="10" y="2" width="1" height="1" fill="#e8e8e0"/><rect x="12" y="1" width="1" height="1" fill="#e8e8e0"/><rect x="4" y="4" width="8" height="1" fill="#e8e8e0"/><rect x="3" y="5" width="10" height="1" fill="#e8e8e0"/><rect x="2" y="6" width="12" height="3" fill="#e8e8e0"/><rect x="3" y="9" width="10" height="1" fill="#e8e8e0"/><rect x="4" y="10" width="8" height="1" fill="#e8e8e0"/><rect x="3" y="6" width="3" height="2" fill="#0a0a0a"/><rect x="10" y="6" width="3" height="2" fill="#0a0a0a"/><rect x="5" y="11" width="2" height="1" fill="#e8e8e0"/><rect x="9" y="11" width="2" height="1" fill="#e8e8e0"/><rect x="2" y="12" width="3" height="1" fill="#e8e8e0"/><rect x="7" y="12" width="2" height="1" fill="#e8e8e0"/><rect x="11" y="12" width="3" height="1" fill="#e8e8e0"/><rect x="1" y="13" width="2" height="1" fill="#e8e8e0"/><rect x="13" y="13" width="2" height="1" fill="#e8e8e0"/></svg></a><a href="../dao/#/dao/1/0x5E58BA0e06ED0F5558f83bE732a4b899a674053E">zOrg</a> &middot; <a href="https://x.com/z_fi_" target="_blank" rel="noopener" title="X"><svg width="14" height="14" viewBox="0 0 300 300.251" xmlns="http://www.w3.org/2000/svg" style="vertical-align:middle;fill:currentColor"><path d="M178.57 127.15 290.27 0h-26.46l-97.03 110.38L89.34 0H0l117.13 166.93L0 300.25h26.46l102.4-116.59 81.8 116.59h89.34M36.01 19.54H76.66l187.13 262.13h-40.66"/></svg></a>
  <div style="margin-top:8px;letter-spacing:1px"><a href="https://github.com/z-fi/zFi" target="_blank" rel="noopener" style="text-decoration:none;color:inherit">zfi.wei</a></div>
  <div class="tagline" style="margin-top:4px;font-size:12px;letter-spacing:0.5px;font-style:italic">the most secure-by-default exchange that does everything onchain</div>
</footer>

<script>
function toggleDark() {
  document.documentElement.classList.toggle('dark');
  localStorage.setItem('dark', document.documentElement.classList.contains('dark') ? '1' : '0');
  updateIframeTheme();
}

function isDark() {
  return document.documentElement.classList.contains('dark');
}

function getPoolIdFromHash() {
  const hash = location.hash; // e.g. #/12345
  const m = hash.match(/^#\/(\d+)$/);
  return m ? m[1] : null;
}

function updateIframeTheme() {
  const iframe = document.querySelector('.chart-wrap iframe');
  if (!iframe) return;
  const poolId = getPoolIdFromHash();
  if (!poolId) return;
  const theme = isDark() ? 'dark' : 'light';
  try { iframe.contentWindow.postMessage({ type: 'theme', theme: theme }, 'https://www.zamm.finance'); } catch(e) {}
  iframe.src = 'https://www.zamm.finance/embed/pool/1/' + poolId + '?theme=' + theme;
}

var _currentPoolId = null;
function render() {
  var poolId = getPoolIdFromHash();
  var container = document.getElementById('chartContainer');
  var poolIdDisplay = document.getElementById('poolIdDisplay');

  if (!poolId) {
    _currentPoolId = null;
    poolIdDisplay.textContent = '';
    container.replaceChildren();
    var err = document.createElement('div');
    err.className = 'chart-error';
    err.textContent = 'No pool ID provided. Use chart/#/{poolId}';
    container.appendChild(err);
    return;
  }

  if (poolId === _currentPoolId) return;
  _currentPoolId = poolId;

  poolIdDisplay.textContent = 'Pool ID: ' + poolId;
  var theme = isDark() ? 'dark' : 'light';
  var wrap = document.createElement('div');
  wrap.className = 'chart-wrap';
  var iframe = document.createElement('iframe');
  iframe.src = 'https://www.zamm.finance/embed/pool/1/' + poolId + '?theme=' + theme;
  iframe.allow = 'clipboard-write';
  iframe.sandbox = 'allow-scripts allow-same-origin';
  wrap.appendChild(iframe);
  container.replaceChildren(wrap);
}

render();
window.addEventListener('hashchange', render);
</script>
</body>
</html>
